<!DOCTYPE html>
<html>
        <head>
            <title>Customer Reviews</title>
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
            <link rel="stylesheet" href="/css/review.css">
        </head>

            <body>

            <%- include('partials/navbar') %>

            <div class="container mt-4">

                <h2 class="mb-4">Customer Reviews</h2>

                <!-- Review Form -->
                <div class="card p-3 mb-4">
                    <h5>Write a Review</h5>
                    
                    <form action="/reviews/add" method="POST">
                        <label class="form-label">Rating</label>
                        <select name="rating" class="form-select mb-2" required>
                            <option value="5">★★★★★ (5)</option>
                            <option value="4">★★★★☆ (4)</option>
                            <option value="3">★★★☆☆ (3)</option>
                            <option value="2">★★☆☆☆ (2)</option>
                            <option value="1">★☆☆☆☆ (1)</option>
                        </select>

                        <label class="form-label mt-2">Comment</label>
                        <textarea name="comment" class="form-control mb-2" rows="3" required></textarea>

                        <button class="btn btn-success">Submit Review</button>
                    </form>
                </div>

                <!-- Display Reviews -->
                <h4 class="mb-3">All Reviews</h4>

                <% reviews.forEach(review => { %>
                    <div class="card p-3 mb-3 shadow-sm">
                        <h5><%= review.username %></h5>
                        <p class="text-warning">
                            <% for (let i = 1; i <= 5; i++) { %>
                                <%= i <= review.rating ? "★" : "☆" %>
                            <% } %>
                        </p>
                        <p><%= review.comment %></p>
                        <small class="text-muted">
                            <%= review.created_at.toLocaleDateString() %>
                        </small>
                    </div>
                <% }) %>

            </div>
                <%- include('partials/footer') %>
            </body>
</html>
