<!DOCTYPE html>
<html>
    <head>
    <title>Order History</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>
        <body>
            <%- include('partials/navbar') %>
            <div class="container mt-5">

                    <h2>Your Order History</h2>
                    <hr>

                    <% if (orders.length === 0) { %>
                        <p>You have no past orders.</p>
                    <% } else { %>

                    <table class="table table-bordered text-center mt-4">
                    <thead class="table-dark">
                        <tr>
                        <th>Invoice Number</th>
                        <th>Date</th>
                        <th>Total</th>
                        <th>Status</th>
                        <th>Details</th>
                        </tr>
                    </thead>

                    <tbody>
                        <% orders.forEach(order => { %>
                        <tr>
                            <td><%= order.invoice_number %></td>
                            <td><%= order.order_date.toLocaleString() %></td>
                            <td>$<%= Number(order.total_amount).toFixed(2) %></td>
                            <td><%= order.status %></td>
                            <td>
                            <a href="/order/invoice/<%= order.order_id %>" class="btn btn-sm btn-primary">
                                View Invoice
                            </a>
                            </td>
                        </tr>
                        <% }) %>
                    </tbody>

                    </table>

                    <% } %>

                    <a href="/shopping" class="btn btn-secondary mt-3">Back to Shopping</a>
            </div>
        </body>
</html>
