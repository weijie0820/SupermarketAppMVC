<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/css/product.css">
    <link rel="stylesheet" href="/css/layout.css">
    <title>Supermarket App</title>
</head>

<body>
    <%- include('partials/navbar') %>

    <main class="page-wrapper">

        <div class="container py-5">

            <% if (user) { %>
                <p>Welcome, <%= user.username %> (<%= user.role %>)</p>
            <% } %>

            <div class="text-center">
                <h2 class="fw-bold page-title">Product Details</h2>
            </div>

            <% if (product) { %>
            <div class="product-card p-4">

                <p><b>Product Name:</b><br> <%= product.productName %></p>

                <p><b>Product Image:</b><br>
                    <img src="/images/<%= product.image %>" class="product-img">
                </p>

                <p><b>Product Quantity:</b><br> <%= product.quantity %></p>

                <p><b>Price:</b><br> $<%= product.price.toFixed(2) %></p>

                <% if (user) { %>
                    <!-- Logged-in user -->
                    <form action="/add-to-cart/<%= product.id %>" method="POST">
                        <button class="add-cart-btn">
                            Add to Cart <i class="ri-shopping-cart-2-fill"></i>
                        </button>
                    </form>
                <% } else { %>
                    <!-- Guest user -->
                    <a href="/register" class="add-cart-btn">
                        Register to Buy <i class="ri-user-add-fill"></i>
                    </a>
                <% } %>

            </div>
            <% } else { %>
                <p>No product found.</p>
            <% } %>

            <div class="mt-4">
                <% if (user && user.role === "admin") { %>
                    <a href="/inventory" class="back-btn">← Back</a>
                <% } else { %>
                    <a href="/shopping" class="back-btn">← Back</a>
                <% } %>
            </div>

        </div>

    </main>

    <%- include('partials/footer') %>
</body>
</html>
